# Updating Objects in State

- When we have objects as our state variables, we should never modify them directly.
- We should always create a new object and pass it to stateSetter function.


## Immutable types in JavaScript

- Some values in JavaScript are immutable. They are readonly. It is impossible to modify them. We have to replcae them with a new value but we cannot change them.
- Number, string and boolean.


## Mutable types

```tsx
const [position, setPosition] = useState({ x: 0, y: 0 });

position.x = 5;
```

- It is possible to change properties of an object. This is called a mutation.



## Treat state as read-only 

- All state in React should be treated as readonly and immutable.
- Instead of mutating them, you should always replace them with a new value.
- Never directly but via a state setter function.
- In short always create a new object and pass it to state setter function.

## 1. Create a new object

```tsx
setPosition({
  x: e.clientX,
  y: e.clientY
});
```
- State is readonly. We must replace it with a new object.


## 2. Copying objects with the spread syntax 

- If the object has very few properties and you are able to provide value for each of them, create a new object.
- Often we need existing data and update only one or two properties from it.
- In that case we create a new object and copy all the values from previous object.
- For example, you may want to update only one field in a form, but keep the previous values for all other fields.

```tsx
  const [person, setPerson] = useState({
    firstName: 'Barbara',
    lastName: 'Hepworth',
    email: 'bhepworth@sculpture.com'
  });

// WRONG
setPerson({
  firstName: e.target.value, // New first name from the input
  lastName: person.lastName,
  email: person.email
});

setPerson({
  ...person, // Copy the old fields
  firstName: e.target.value // But override this one
});
```


## Updating a nested object 

```tsx
const [person, setPerson] = useState({
  name: 'Niki de Saint Phalle',
  artwork: {
    title: 'Blue Nana',
    city: 'Hamburg',
    image: 'https://i.imgur.com/Sd1AgUOm.jpg',
  }
});

```

- If you wanted to update` person.artwork.city`, itâ€™s clear how to do it with mutation:

```tsx
person.artwork.city = 'New Delhi';
```
- 
